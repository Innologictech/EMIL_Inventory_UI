<div class="">
    <label class="fw-bold mt-3 fs-5 ">Stock Master</label>
</div>




<div class=" py-3 px-md-5"
    style="background-color:#ffffff;">
    <div class="d-flex justify-content-end mb-3">
        <button class="btn btn-danger" (click)="stockBulkClick()">Stock Bulk Upload</button>
    </div>
    <div *ngIf="fileupload">
        <div class="mb-3">
            <label class="form-label fw-semibold" for="productFile">
                Product<span class="text-danger">*</span>
            </label>
            <input class="form-control" type="file" id="productFile" required>
            <div class="form-text mt-1">
                Upload Stock Data Excel File.
                <a href="sample.xlsx" class="text-danger" download>Download sample file.</a>
            </div>
        </div>

        <button type="submit" class="btn btn-primary px-4">
            Submit
        </button>

    </div>
    <div   *ngIf="!fileupload" class="container-fluid my-4 p-3" style="border:2px solid #dddddd; border-top:8px solid #dddddd;">


        <!-- Top Buttons -->
        <div *ngIf="show" class="d-flex flex-wrap justify-content-between align-items-center mb-3 gap-2">
            <div>
                <button type="button" class="btn btn-outline-primary" (click)="onAddStockClick()">
                    <i class="mdi mdi-plus"></i> Add Stock
                </button>
            </div>
            <div class="d-flex flex-wrap gap-2">
                <button type="button" class="btn btn-outline-secondary">
                    <i class="mdi mdi-export"></i> Export
                </button>
                <button type="button" class="btn btn-outline-secondary">
                    <i class="mdi mdi-printer"></i> Print
                </button>
                <!-- <button *ngIf="!showSearch" type="button" class="btn btn-primary" (click)="toggleSearch($event)">
          <i class="mdi mdi-magnify"></i>
        </button> -->
                <!-- Search toggle -->
                <ng-container>
                    <button *ngIf="!showSearch" type="button" class="btn btn-primary" (click)="toggleSearch($event)">
                        <i class="mdi mdi-magnify"></i>
                    </button>

                    <input *ngIf="showSearch" type="text" class="d-inline-block" style="width:200px;"
                        placeholder="Search..." (click)="$event.stopPropagation()" (blur)="closeSearch()" />
                </ng-container>
            </div>
        </div>

        <!-- Add User Form -->
        <div *ngIf="showAddStockForm">
            <!-- <h6 class="fw-bold mb-3">Add User</h6> -->
            <div class="bg-light fw-semibold px-3 py-2 mb-4 border-bottom">
                Add Site
            </div>
            <form [formGroup]="stockForm" (ngSubmit)="onSubmit()">


                <div class="row mb-3">
                    <label class="col-md-3 col-form-label fw-semibold">Store Code*</label>
                    <div class="col-md-9">
                        <input type="text" class="form-control" formControlName="storeCode">
                        <div *ngIf="submitted && f.storeCode.errors" class="text-danger small">
                            Store Code is required
                        </div>
                    </div>
                </div>


                <div class="row mb-3">
                    <label class="col-md-3 col-form-label fw-semibold">Product Code*</label>
                    <div class="col-md-9">
                        <input type="text" class="form-control" formControlName="productCode">
                        <div *ngIf="submitted && f.productCode.errors" class="text-danger small">
                            Product Code is required
                        </div>
                    </div>
                </div>
                <div class="row mb-3">
                    <label class="col-md-3 col-form-label fw-semibold">Quantity*</label>
                    <div class="col-md-9">
                        <input type="text" class="form-control" formControlName="quantity">
                        <div *ngIf="submitted && f.quantity.errors" class="text-danger small">
                            quantity is required
                        </div>
                    </div>
                </div>
                <div class="row mb-3">
                    <label class="col-md-3 col-form-label fw-semibold">Storage Location*</label>
                    <div class="col-md-9">
                        <input type="text" class="form-control" formControlName="storageLocation">
                        <div *ngIf="submitted && f.storageLocation.errors" class="text-danger small">
                            Storage Location is required
                        </div>
                    </div>
                </div>


                <!-- Buttons -->
                <div class="row mt-4">
                    <div class="col-12 d-flex gap-2">
                        <button type="submit" class="btn btn-success">
                            <i class="bi bi-check2"></i> Save
                        </button>
                        <button type="button" class="btn btn-info text-white" (click)="onSaveAndBack()">
                            <i class="bi bi-arrow-left-circle"></i> Save & Go Back
                        </button>
                        <button type="button" class="btn btn-secondary" (click)="onCancel()">
                            <i class="bi bi-x-circle"></i> Cancel
                        </button>
                    </div>
                </div>

            </form>

        </div>

        <!-- Tab Content -->
        <div *ngIf="showTable" class="col-md-12 mt-3">
            <div class="table-responsive">
                <table class="table table-bordered text-nowrap">
                    <thead>
                        <tr>
                            <th>Actions</th>
                            <th>Id</th>
                            <th>Store code</th>
                            <th>Product code</th>
                            <th>Quantity</th>
                            <th>Storage location</th>
                        </tr>
                        <tr>
                            <th>
                                <button type="button" class="btn btn-outline-secondary btn-sm p-2" style="width:50px;">
                                    <i class="bi bi-arrow-repeat"></i>
                                </button>
                            </th>
                            <th><input type="text" class="form-control form-control-sm" placeholder="Search Id"></th>
                            <th><input type="text" class="form-control form-control-sm" placeholder="Search Store code">
                            </th>
                            <th><input type="text" class="form-control form-control-sm"
                                    placeholder="Search Product code"></th>
                            <th><input type="text" class="form-control form-control-sm" placeholder="Search Quantity">
                            </th>
                            <th><input type="text" class="form-control form-control-sm"
                                    placeholder="Search Storage location"></th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr *ngFor="let m of materials; let i = index">
                            <td>
                                <button type="button" class="btn btn-outline-secondary btn-sm">
                                    <i class="bi bi-pencil"></i> Edit
                                </button>
                            </td>
                            <td>{{ i + 1 }}</td>
                            <td>{{ m.storeCode }}</td>
                            <td>{{ m.productCode }}</td>
                            <td>{{ m.quantity }}</td>
                            <td>{{ m.storageLocation }}</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>


    </div>
</div>