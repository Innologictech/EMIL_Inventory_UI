<div class="fw-bold mt-3 fs-5 ms-5">
  <span style="color: black;">Order Â»</span>
  <span style="color: #ce242a;"> Driver Assignment / Plant Change</span>
</div>

 <div class="card shadow-sm ms-5 mt-4 me-5">
    <div class="card-body">
    <form [formGroup]="assignDelivery">

  <div class="row col-12"> 
    <div class="col-md-3"></div> <!-- Input with search icon --> 
  <div class="row col-md-6"> 
    <div class="col-md-10"> 
    <input type="text" class="form-control" placeholder="Type Invoice/STO PO Number" formControlName="ponumber"> 
</div> <div class="col-md-1"> 
  <button class="btn btn-danger w-100" type="button" (click)="searchPO()"> 
        <i class="bi bi-search"></i> 
    </button> 
</div> 
</div> 
<div class="col-md-3"></div>
 
  </div>

  <!-- Table: Initially hidden -->
  <div *ngIf="showTable" class="col-lg-12 col-md-12 mb-3">
    <h5 class="fw-semibold mb-3">Dispatch Items List</h5>
   <div class="border rounded overflow-hidden">
  
  <!-- Header Details -->
  <div class="border-bottom p-3" style="background-color: #f7f7f7;">
    <div class="row">
      <div class="col-4">
        <label class="mb-1 d-block">Invoice Number</label>
        <label class="mb-1 d-block">Customer Name</label>
        <label class="mb-1 d-block">Mobile Number</label>
      </div>
      <div class="col-5">
        <label class="mt-3 d-block">Address</label>
      </div>
      <div class="col-3">
        <label class="mb-1 d-block">Invoice DATE</label>
      </div>
    </div>
  </div>

  <!-- Table -->
  <div class="table-responsive">
    <table class="table table-bordered text-center align-middle mb-0">
      <thead class="table-light">
        <tr>
          <th>Item No.</th>
          <th>Description</th>
          <th>Delivery Plant</th>
          <th>Open Qty.</th>
          <th>Dispatched Qty.</th>
          <th>Delivered Qty.</th>
          <th class="text-center">
            <div class="d-flex flex-column align-items-center">
              <span>Select All</span>
              <input type="checkbox" class="form-check-input mt-1">
            </div>
          </th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td></td>
          <td></td>
          <td class="text-center">
     <button type="button" class="btn btn-sm" style="background-color: #323A46; color: #fff;" (click)="openModal(newUserTemplate)">
        Change
        </button>

    </td>
          <td></td>
          <td></td>
          <td></td>
            <td class="text-center">
          <input   type="checkbox" class="form-check-input">
        </td>       
     </tr>
      </tbody>
    </table>
  </div>

</div>

  </div>
  </form>
  
</div>
 <ng-template #newUserTemplate let-c="close">
    
      <div class="modal-header">
  Changing Dispatch Plant
  <button type="button" class="btn-close" aria-label="Close" (click)="closeModal()"></button>
</div>

          <div class="modal-body">
            
            <form [formGroup]="changeAssign">
          <div class="col-12 mb-2">
            <label>Store/Plant</label>
            <input class="form-control" placeholder="Select Store to Dispatch Item" formControlName="plant">
        </div> 
           <div class="col-12 mt-2">
            <label>Store/Plant Code</label>
            <input class="form-control" placeholder="Enter Storage Location" formControlName="plantCode">
        </div> 
                     


              

            
            </form>
          </div>
          <div class="modal-footer">
              <button type="button" class="btn btnClose btn-raised" (click)="closeModal()">Close</button>
            <button type="button" class="btn btnSave btn-raised" (click)="onSave(modal)">Submit</button> <!-- FIXED: Removed modal param -->

          </div>
      
    </ng-template>

</div>
